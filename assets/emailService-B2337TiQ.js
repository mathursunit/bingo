import{g as P,a as T,_ as D,b as _,i as C,p as R,u as L,F as U,c as F,C as $,r as E,d as x,e as M}from"./index-CqmGHsXu.js";const j="type.googleapis.com/google.protobuf.Int64Value",H="type.googleapis.com/google.protobuf.UInt64Value";function S(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function k(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>k(t));if(typeof e=="function"||typeof e=="object")return S(e,t=>k(t));throw new Error("Data cannot be encoded in JSON: "+e)}function m(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case j:case H:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>m(t)):typeof e=="function"||typeof e=="object"?S(e,t=>m(t)):e}const A="functions";const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class f extends U{constructor(t,n,r){super(`${A}/${t}`,n||""),this.details=r,Object.setPrototypeOf(this,f.prototype)}}function G(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function y(e,t){let n=G(e),r=n,o;try{const s=t&&t.error;if(s){const a=s.status;if(typeof a=="string"){if(!N[a])return new f("internal","internal");n=N[a],r=a}const i=s.message;typeof i=="string"&&(r=i),o=s.details,o!==void 0&&(o=m(o))}}catch{}return n==="ok"?null:new f(n,r,o)}class J{constructor(t,n,r,o){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,x(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||o?.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(t){const n=await this.getAuthToken(),r=await this.getMessagingToken(),o=await this.getAppCheckToken(t);return{authToken:n,messagingToken:r,appCheckToken:o}}}const w="us-central1",q=/^data: (.*?)(?:\n|$)/;function B(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new f("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class V{constructor(t,n,r,o,s=w,a=(...i)=>fetch(...i)){this.app=t,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new J(t,n,r,o),this.cancelAllRequests=new Promise(i=>{this.deleteService=()=>Promise.resolve(i())});try{const i=new URL(s);this.customDomain=i.origin+(i.pathname==="/"?"":i.pathname),this.region=w}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${n}.cloudfunctions.net/${t}`}}function X(e,t,n){const r=C(t);e.emulatorOrigin=`http${r?"s":""}://${t}:${n}`,r&&(R(e.emulatorOrigin+"/backends"),L("Functions",!0))}function Y(e,t,n){const r=o=>W(e,t,o,{});return r.stream=(o,s)=>Q(e,t,o,s),r}function I(e){return e.emulatorOrigin&&C(e.emulatorOrigin)?"include":void 0}async function K(e,t,n,r,o){n["Content-Type"]="application/json";let s;try{s=await r(e,{method:"POST",body:JSON.stringify(t),headers:n,credentials:I(o)})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function O(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function W(e,t,n,r){const o=e._url(t);return z(e,o,n,r)}async function z(e,t,n,r){n=k(n);const o={data:n},s=await O(e,r),a=r.timeout||7e4,i=B(a),u=await Promise.race([K(t,o,s,e.fetchImpl,e),i.promise,e.cancelAllRequests]);if(i.cancel(),!u)throw new f("cancelled","Firebase Functions instance was deleted.");const d=y(u.status,u.json);if(d)throw d;if(!u.json)throw new f("internal","Response is not valid JSON object.");let c=u.json.data;if(typeof c>"u"&&(c=u.json.result),typeof c>"u")throw new f("internal","Response is missing data field.");return{data:m(c)}}function Q(e,t,n,r){const o=e._url(t);return Z(e,o,n,r||{})}async function Z(e,t,n,r){n=k(n);const o={data:n},s=await O(e,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(o),headers:s,signal:r?.signal,credentials:I(e)})}catch(l){if(l instanceof Error&&l.name==="AbortError"){const g=new f("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const h=y(0,null);return{data:Promise.reject(h),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(h)}}}}}}let i,u;const d=new Promise((l,h)=>{i=l,u=h});r?.signal?.addEventListener("abort",()=>{const l=new f("cancelled","Request was cancelled.");u(l)});const c=a.body.getReader(),p=ee(c,i,u,r?.signal);return{stream:{[Symbol.asyncIterator](){const l=p.getReader();return{async next(){const{value:h,done:g}=await l.read();return{value:h,done:g}},async return(){return await l.cancel(),{done:!0,value:void 0}}}}},data:d}}function ee(e,t,n,r){const o=(a,i)=>{const u=a.match(q);if(!u)return;const d=u[1];try{const c=JSON.parse(d);if("result"in c){t(m(c.result));return}if("message"in c){i.enqueue(m(c.message));return}if("error"in c){const p=y(0,c);i.error(p),n(p);return}}catch(c){if(c instanceof f){i.error(c),n(c);return}}},s=new TextDecoder;return new ReadableStream({start(a){let i="";return u();async function u(){if(r?.aborted){const d=new f("cancelled","Request was cancelled");return a.error(d),n(d),Promise.resolve()}try{const{value:d,done:c}=await e.read();if(c){i.trim()&&o(i.trim(),a),a.close();return}if(r?.aborted){const l=new f("cancelled","Request was cancelled");a.error(l),n(l),await e.cancel();return}i+=s.decode(d,{stream:!0});const p=i.split(`
`);i=p.pop()||"";for(const l of p)l.trim()&&o(l.trim(),a);return u()}catch(d){const c=d instanceof f?d:y(0,null);a.error(c),n(c)}}},cancel(){return e.cancel()}})}const b="@firebase/functions",v="0.13.1";const te="auth-internal",ne="app-check-internal",re="messaging-internal";function oe(e){const t=(n,{instanceIdentifier:r})=>{const o=n.getProvider("app").getImmediate(),s=n.getProvider(te),a=n.getProvider(re),i=n.getProvider(ne);return new V(o,s,a,i,r)};F(new $(A,t,"PUBLIC").setMultipleInstances(!0)),E(b,v,e),E(b,v,"esm2020")}function ie(e=P(),t=w){const r=D(T(e),A).getImmediate({identifier:t}),o=_("functions");return o&&se(r,...o),r}function se(e,t,n){X(T(e),t,n)}function ae(e,t,n){return Y(T(e),t)}oe();const ce=ie(M),le=async e=>{try{return(await ae(ce,"sendInviteEmail")(e)).data}catch(t){if(console.error("Cloud function call failed:",t),t.code==="functions/not-found"||t.code==="functions/unavailable")return{success:!1,message:"Email service is not configured. Using fallback email method."};throw t}},de=(e,t)=>{const n=encodeURIComponent(`${t} invited you to SunSar Bingo!`),r=encodeURIComponent(`Hey! Come join me on SunSar Bingo to track our 2026 goals together.

Sign up here: ${window.location.origin}`);window.open(`mailto:${e}?subject=${n}&body=${r}`)};export{de as openMailtoFallback,le as sendInviteEmail};
